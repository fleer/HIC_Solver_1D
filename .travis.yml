sudo: required
language: cpp
matrix:
  include:
    # works on Precise and Trusty
    - os: linux
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-4.9
      env:
         - MATRIX_EVAL="CC=gcc-4.9 && CXX=g++-4.9"
        
    - os: osx
      osx_image: xcode8.2
      env:
        - MATRIX_EVAL="CC=gcc-4.9 --without-multilib && CXX=g++-4.9"
          
        
# refer: https://gcc.gnu.org/bugzilla/show_bug.cgi?id=60670
# for install a gcc on mac with OpenMP support
before_install:
  - eval "${MATRIX_EVAL}"
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then 
      wget ftp://ftp.gnu.org/gnu/gsl/gsl-2.4.tar.gz;
      tar -xzvf gsl-2.4.tar.gz;
      pushd gsl-2.4 && ./configure --prefix=/usr && make && sudo make install && popd;
      fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update && brew install gcc; brew reinstall gcc --without-multilib; travis_wait brew install gsl; fi

script: make CXX=$COMPILER
